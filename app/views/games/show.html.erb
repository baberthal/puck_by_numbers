<p id="notice"><%= notice %></p>

<div class="container">
  <div class="row">
    <div class="col-md-1">
      <%= image_tag(@game.away_team.logo, height: 60, class: "teamlogo float-left") %>
    </div>
    <div class="col-md-10">
      <h1 class="text-center game-header">
        <%= @game.away_team.name %> <%= @game.away_team.nickname %>
        @ <%= @game.home_team.name %> <%= @game.home_team.nickname %></h1>
    </div>
    <div class="col-md-1">
      <%= image_tag(@game.home_team.logo, height: 60, class: "teamlogo float-right") %>
    </div>
  </div>

  <div class="row">
   <div class="col-md-12">
     <h2 class="text-center"><%= @game.fscore_away %> - <%= @game.fscore_home %></h2>
   </div>
  </div>

  <div class="row">
    <div class="col-md-12">
      <h4 class="text-center">
        <%= @game.game_start.strftime("%A, %B %-d, %Y - %I:%M %p") %></h4>
    </div>
  </div>

  <div class="row">
    <div class="col-md-12">
      <div role="tabpanel">
        <ul class="nav nav-tabs" role="tablist">
          <li role="presentation" class="active"><a href="#summary" aria-controls="summary" role="tab" data-toggle="tab">Summary</a></li>
          <li role="presentation"><a href="#charts" aria-controls="charts" role="tab" data-toggle="tab">Charts</a></li>
        </ul>

        <div class="tab-content">
          <div role="tabpanel" class="tab-pane active" id="summary">
            <%= render 'situation_panel' %>
            <div id="stats" class="container">
              <%= render 'stats_table' %>
            </div>
          </div>

          <div role="tabpanel" class="tab-pane" id="charts">
            <div class="row">
             <div class="col-md-12">
               <%= render 'chart_selection_panel'%>
               <h3 class="subheader text-center">Running Event Count</h3>
               <%= high_chart("running-events", @event_count_chart) do |c|%>
                 <%= raw "options.tooltip.formatter = function() {return '<b>Time: </b>' + Math.floor(this.x) + ':' + Math.round((this.x%1)*60) + '<br><b>' + this.series.name + ' ' + this.point.name + '</b><br>' + 'Total Events: <b>' + this.y + '</b>' }" %>
                 <%= raw "showTooltip = function(e) { displayTooltip(this.options.tooltipText, this.svgElem.d.split(' ')[1]); }" %>
               <% end %>
             </div>
            </div>

            <div class="row">
              <h3 class="subheader text-center">Corsi Heat Map</h3>
              <%= high_chart("heat-map", @corsi_heat_map) do |c| %>
                <%= raw "options.tooltip.formatter = function () {return '<b>' + this.series.xAxis.categories[this.point.x] + '</b> was <br><b>' + this.point.value + '</b> corsi +/- against <br><b>' + this.series.yAxis.categories[this.point.y] + '</b>' }" %>
              <% end %>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
      <%= link_to 'Back', season_games_path %>
</div>
